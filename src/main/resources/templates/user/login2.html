<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">


<!-- Mirrored from www.zi-han.net/theme/hplus/login21.html by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 20 Jan 2016 14:19:49 GMT -->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta http-equiv="Access-Control-Allow-Origin" content="*">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
    <title>校园互助平台</title>
    <meta name="keywords" content="校园互助平台">
    <meta name="description" content="校园互助平台">
    <link rel="stylesheet" th:href="@{/static/css/animate.min.css}"/>
    <link rel="stylesheet" th:href="@{/static/css/style.min.css}"/>
    <link rel="stylesheet" th:href="@{/static/css/login.min.css}"/>
    <link rel="stylesheet" th:href="@{/static/css/bootstrap.min.css}"/>
    <link rel="stylesheet" th:href="@{/static/layui/css/layui.css}"/>
    <link rel="stylesheet" th:href="@{/static/css/font-awesome.min93e3.css?v=4.4.0}"/>
    <!--[if lt IE 9]>
    <meta http-equiv="refresh" content="0;ie.html" />
    <script src="https://cdn.staticfile.org/html5shiv/r29/html5.min.js"></script>
    <script src="https://cdn.staticfile.org/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
    <script>
        if(window.top!==window.self){window.top.location=window.location};
    </script>

</head>

<body class="signin">
<div class="signinpanel">
    <div class="row">
        <div class="col-sm-7">
            <div class="signin-info">
                <div class="logopanel m-b">
                    <h1>校园互助平台</h1>
                </div>
                <div class="m-b"></div>
                <h4>欢迎使用 <strong>校园互助平台</strong></h4>
                <ul class="m-b">
                    <li><i class="fa fa-arrow-circle-o-right m-r-xs"></i> 实名登录</li>
                    <li><i class="fa fa-arrow-circle-o-right m-r-xs"></i> 人员管理</li>
                    <li><i class="fa fa-arrow-circle-o-right m-r-xs"></i> 求助互助</li>
                    <li><i class="fa fa-arrow-circle-o-right m-r-xs"></i> 物品共享</li>
                    <li><i class="fa fa-arrow-circle-o-right m-r-xs"></i> 物流管理</li>
                </ul>
                <strong>还没有账号？ <a href="/index/register.html">立即注册&raquo;</a></strong>
            </div>
        </div>
        <div class="col-sm-5">
            <form class="layui-form" action="">
                <h4 class="no-margins">登录：</h4>
                <p class="m-t-md">登录到校园互助平台</p>
                <div class="layui-input-inline">
                    <input type="text" name="username" required  lay-verify="required|account" lay-vertype="tips" class="form-control uname" placeholder="用户名" />
                </div>
                <div class="layui-input-inline">
                    <input type="password" name="password" lay-verify="required|password" lay-vertype="tips" class="form-control pword m-b" autocomplete="off"  placeholder="密码" />
                </div>
                <div class="layui-input-inline">
                    <div class="row">
                        <div class="col-sm-6">
                            <input type="text" name="vercode" lay-verify="required|captcha" lay-vertype="tips" class="form-control" autocomplete="off"  id="vercode" placeholder="验证码">
                        </div>
                        <div class="col-sm-6">
                            <img  onClick="this.src=this.src+'?'+Math.random();" id="img" class="form-control" th:src="@{/getVerify}">
                        </div>
                    </div>
                </div>
                <a href="#">忘记密码了？</a>
                <button class="btn btn-success btn-block" lay-submit="" lay-filter="login">登录</button>
            </form>
        </div>
    </div>
    <div class="signup-footer">
        <div class="pull-left">
            &copy; 2023 All Rights Reserved. Song YaChao
        </div>
    </div>
</div>
<script th:src="@{/static/layui/layui.js}"></script>
<script type="text/javascript" th:src="@{/static/js/core.util.js}"></script>
<script th:inline="javascript" type="text/javascript">
    var ctx = '[[@{/}]]'.replaceAll("\"", "").replace('//', '/');
</script>
<script>
    layui.use(['form'], function () {
        var form = layui.form,
            layer = layui.layer,
            $ = layui.jquery;
        // 进行登录操作
        form.on('submit(login)', function (data) {
            data = data.field;
            if (data.vercode == '') {
                layer.msg('请输入验证码');
                return false;
            }
            if (data.username == '') {
                layer.msg('用户名不能为空');
                return false;
            }
            if (data.password == '') {
                layer.msg('密码不能为空');
                return false;
            }

            $.ajax({
                type: 'POST',
                url: ctx + 'user/login',
                dataType: "JSON",
                data: JSON.stringify(data),
                contentType: "application/json",
                success: function (res) {
                    if (res.code == 0) {
                        layui.data('LocalData', {
                            key: "access_token",
                            value: res.data.accessToken
                        });
                        layer.msg('登录成功', {time: 1000}, function () {
                            window.location = ctx + "index";
                        });
                    } else {
                        layer.msg(res.msg);
                        $("#img").click();
                    }
                }
            })

            return false;
        });
    });
</script>
</body>
<!-- Mirrored from www.zi-han.net/theme/hplus/login21.html by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 20 Jan 2016 14:19:52 GMT -->
</html>